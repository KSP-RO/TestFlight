language: csharp
dotnetcore: 3.0
install:
  - sudo apt-get update
  - sudo apt-get install python2.7
script:
  - make clean
  - make meta
  - make getBins
  - make zip
deploy:
  - provider: releases
    api_key:
      secure: "Jgqs7gplBhnZS15NIuCObgg/CjY1mqr5OHTbIIeIkeHz+2wGdBT92fOhk/4YTG8jj3CTrLEKvkIjMsW4xboXL9CVDXoJte5D+kqrsQz6gltP74G52D6Iq+Wcadt1DwWjYCRuxcVDSaEpJI5EWxn/auvbjIKMemP7dQORQZP49r0="
    file_glob: true
    file:
    - TestFlightCore*.zip
    skip_cleanup: true
    on:
      repo: KSP-RO/TestFlight
      tags: true
      all_branches: true
  - provider: s3
    access_key_id: AKIAWSIUIHJJ3BL3RPWU
    secret_accesss_key: 
      secure: "gpwK4CNpdLnnNRwu64TYVpzE/HKin8+bwGF1acBjQLnWv4wX/d4dr/WsO1sl442z57VtcPRyMyV/wnTdCk4kCa5xuBwJGGQeBsZDQ/0w0UXfoHn+HBLbyAfVqhJb3bziJCIn5W1rICV3KIKWEI91G9TPFuWU5FMB1VkTDufzdM4="
    bucket: "ksp-ro"
    skip_cleanup: true
    local_dir: builds
    glob: "TestFlightCore*.zip"
    acl: public_read
    on:
      all_branches: true
env:
  global:
  - secure: "KK4zCiujTh58oH6dX5Hphi357mwnDrjFS9oVbCOaDUk+Uwz6qhEUgwvWZu5a2/wEFFRV4JyRm27QsAdDAJ0qy0f+SW6yoTIrdYx3PTDuWl+CL4L5yGV6K/LYrGrtDz1AXLFupfhgPcoB62dYDmZmzCHNioB8BY5zuuA9o3fzxcU="
  - secure: "fLfigVPg9ubGokcauE+797nTcw63TPjsJXmKrzG1JqsvzCXzd4qVrbw6zuwO7rRzAaimqwbxjIVxZFqzJHb9jCut3FcM+iMranewM75qRErqSZh14sImWi9YMRIl5wkb0xElGIbPYAY1aqR89V8m20CthTX21/dfmJhTa8EyAPM="
  - secure: "TTeep3257heuzclYnRD5r+fKCuilW+heZynKplW30SGckkrdtcZe6lbYs0tQ+5o3a8X1y41TQHKgXIJQM0P2DIfKODT9iofpu4gCIZoL+cF7Mj3BKoBHz7zKtYoCMdP/fkTh8cJMpV5nERhiADmC4hSdghwUmydLFI2VS7IUIO0="
  - secure: "U9SivVZAeUWqr+WlAjeZC6cWHGJ07IN81koIVSQxXPcpgTBoGTkrSBPFcUTer0u12BCFY9W6W4ffTvXhVm9QSKn1Cjzh6TucB5zKRDnnx8YcheoM6tgR/0muctrqbH45FAVGZ1XnqbD1H4ZQqCcPMmbECoewwzFnZP5+OvZMY2c="
  - secure: "bIWddpMEbIIUoNAnIeITErojIQ2PQJmOfEpdDf/IgrWnkTWBu4ibtRqfvPi9J5qrfphbkn3pHfoMBSsbUrhCej86AicTd+ZlpSq91vJC+TOxdTbchBgcNiq+g27BOpgHVYc/YkurafP7ktUPO/drWL3Fb6BXfPfUHPwlXgxdq10="
  - secure: "SGGsoiKWIWU6UIyPhmpn1U+eSP+alJsESsqoWO6RAzzbyXHZACJk5Wu0iECj69BlDtfOWpHCLsrbytWGVeIG00RrDmdWOKdJtm+YbKqsurxLiy6eKAn+eckj9aCiVP4bnfxQZ8nyf+oZkCfClLu0wSnJ1bbvZSpH+AWO7IiF0uo="
  - secure: "g8CdANgd1tOLqQclHZJpCkPP87FP72dORzXlJevXaCC3r7zm18oLphbCJLWtFueJHjPL0KcEpFrA3yOhd14V6p703GiqirLJEGfAlPH0Jf/1/OcnKKodqR7+dPRKoeHB9abNkJvCH4Ky3OL4PG41kXUlvw6vLU1FlXlohGcOCAE="
  - secure: "euWk+O9HXVSLmzTg9Fs9LPh+MM1R4wBJKMhnTT9INMwr7eIqyz2jvLhBtSM0GyHr1lCS7hc5kY5tbdYfg0En5cn6FbdFj6L64AMns65Af6maMcRLudZFTVqS1/1PJ5Xxmb5gLl9Jgvr29waNVLyqbh/vHlWFuuMaUCnSEDg4osA="
  - secure: "ZNknx1mqfLArtE3jdqA8tazWq6K5g/9OuKRGNXWI71b/4qkRSqMebwSuJiKeN3c0aaBmm8NAyU+OK/4eFkaWWd0pVeryUKzFcboKM6EFlvMZXtBT+OypFYMzPEWTPX2ZWkRZ4p1xu5DT7rpj+Uee5IDbpTudd3KK6hiKGvq4Zkc="
  - secure: "KAgC/svQXgbEFyv4K5yNkh+AGemhxmi1Av1O/d+CB7H2PcVnty2/4clIjryP6odEeYiMyTj4SKLDNBCPTpDdbezuiMSwGvAmiqGXCpae2QUs6N5NOJzUxTzieLaMnWuOXZot2K1Ny6/wvPNw3DtvHXqm20OvlALE1+JsYOzovwg="
  - secure: "Fj3voyiGWdngLhkToAcKIJJOHaJjMfEFDfpTyt/hyqqh7mAVjVovI/jyQmfIexQ4X5FWjuApEaLa9ZujALp/5nnwUAc7CqH3qbSeDohipvIfPf0G87GzRi06SoG1bwZBbSHyqO/QSZJ6rh0WTJAgoCvKQTikd/RXCA66fllAJHc="